{{- define "main" }} {{/* Optional page header (shows title & description only
if NOT home page) */}} {{- if and (not .IsHome) .Title }}
<header class="page-header">
  {{- partial "breadcrumbs.html" . }}
  <h1>{{ .Title }}</h1>
  {{- if .Description }}
  <div class="post-description">{{ .Description | markdownify }}</div>
  {{- end }}
</header>
{{- end }} {{/* Optional content block (shows on any page that has .Content)
*/}} {{- if .Content }}
<div class="post-content">
  {{- if not (.Param "disableAnchoredHeadings") }} {{- partial
  "anchored_headings.html" .Content }} {{- else }} {{ .Content }} {{- end }}
</div>
{{- end }} {{/* Post listing (for home page or section pages) */}} {{- $pages :=
union .RegularPages .Sections }} {{- if .IsHome }} {{- $pages = where
site.RegularPages "Type" "in" site.Params.mainSections }} {{- $pages = where
$pages "Params.hiddenInHomeList" "!=" "true" }} {{- end }} {{- $paginator :=
.Paginate $pages }} {{- range $index, $page := $paginator.Pages }}

<article class="post-entry fade-in">
  {{- partial "cover.html" (dict "cxt" . "IsSingle" false "isHidden" (.Param
  "cover.hiddenInList" | default (.Param "cover.hidden") | default false)) }}
  <header class="entry-header">
    <h2 class="entry-hint-parent">{{ .Title }}</h2>
  </header>
  {{- if not (.Param "hideSummary") }}
  <div class="entry-content">
    <p>
      {{ .Summary | plainify | htmlUnescape }}{{ if .Truncated }}...{{ end }}
    </p>
  </div>
  {{- end }}
  <footer class="entry-footer">{{- partial "post_meta.html" . -}}</footer>
  <a
    class="entry-link"
    aria-label="post link to {{ .Title | plainify }}"
    href="{{ .Permalink }}"
  ></a>
</article>
{{- end }} {{/* Pagination */}} {{- if gt $paginator.TotalPages 1 }}
<footer class="page-footer">
  <nav class="pagination">
    {{- if $paginator.HasPrev }}
    <a class="prev" href="{{ $paginator.Prev.URL | absURL }}"
      >«&nbsp;{{ i18n "prev_page" }}</a
    >
    {{- end }} {{- if $paginator.HasNext }}
    <a class="next" href="{{ $paginator.Next.URL | absURL }}"
      >{{ i18n "next_page" }}&nbsp;»</a
    >
    {{- end }}
  </nav>
</footer>
{{- end }} {{- end }}
